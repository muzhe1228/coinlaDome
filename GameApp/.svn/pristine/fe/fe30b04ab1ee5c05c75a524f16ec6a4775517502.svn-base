(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4068ad28"],{3033:function(t,e,s){},4166:function(t,e,s){},4803:function(t,e,s){"use strict";var a=s("4166"),n=s.n(a);n.a},c160:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("LeftNav"),s("div",{staticClass:"wrap"},[s("div",{staticClass:"contentDiv"},[s("ScrollH",{attrs:{data:t.msgList,pullup:""},on:{scrollToEnd:t.getMsgList}},t._l(t.msgList,function(e){return s("ul",{key:e.messageId,staticClass:"wrap_info",on:{click:function(s){t.showDetail(e)}}},[s("li",{staticClass:"wrap_info_l"},[s("p",{staticClass:"size"},[s("span",{staticClass:"title"},[t._v(t._s(e.title))]),s("span",{staticClass:"intor"},[t._v(t._s(t.ReplaceBR(e.content)))])])]),s("li",{staticClass:"wrap_info_r"},[e.isRead?t._e():s("p",{staticClass:"sdot"}),s("p",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(e.createDate,"MM-dd hh:mm")))]),s("p",{staticClass:"Icon"},[s("i",{staticClass:"iconfont"},[t._v("")])])])])}),0)],1)]),t.show?s("MsgDetail",{attrs:{Detail:t.Detail},on:{close:t.close}}):t._e()],1)},n=[],o=s("7466"),i=s("752c"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("comModal",{attrs:{titleName:t.Detail.title},on:{close:t.close}},[s("p",{staticClass:"msgContent",domProps:{innerHTML:t._s(t.Detail.content)}})])},l=[],r=s("0ae7"),u={props:{Detail:{type:Object,default:function(){return{}}}},data:function(){return{}},components:{comModal:r["a"]},methods:{show:function(){this.$refs.comm.show()},close:function(){this.$emit("close")}}},d=u,f=(s("4803"),s("2877")),g=Object(f["a"])(d,c,l,!1,null,"79212c30",null);g.options.__file="msgDetail.vue";var h=g.exports,p=s("2f62");function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},a=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),a.forEach(function(e){v(t,e,s[e])})}return t}function v(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var _={data:function(){return{msgList:[],Detail:{},show:!1,page:1,size:20,canLoadData:!0}},mounted:function(){this.getMsgList()},components:{LeftNav:o["a"],ScrollH:i["a"],MsgDetail:h},methods:m({showDetail:function(t){this.$clickAudio(),this.Detail=t,this.show=!0;var e=this.GetIndexAtArray(this.msgList,t),s=t;s.isRead=1;var a=this.msgList;a.splice(e,1,s),this.ChangeRead(t.messageId)},close:function(){this.$clickAudio(),this.show=!1},GetIndexAtArray:function(t,e){var s=t.length;while(s--)if(t[s]===e)return s;return!1},ChangeRead:function(t){var e=this;this.$ajax({url:"/mcs/message/updateMessageStatus",data:{params:{token:this.$lStore.get("Token"),ids:t}}},!0).then(function(t){0===t.code&&e.LookForUnRead()}).catch(function(t){console.log(t)})},LookForUnRead:function(){var t=this;this.$ajax({url:"/mcs/message/selectMessageRedDot",data:{params:{token:this.$lStore.get("Token")}}},!0).then(function(e){0===e.code&&(console.log(e.data),t.updateMessageUnRead(e.data))}).catch(function(t){console.log(t)})},getMsgList:function(t){var e=this;this.canLoadData&&(this.canLoadData=!1,this.$ajax({url:"/mcs/message/selectMessageList",data:{params:{token:e.$lStore.get("Token"),size:e.size,page:e.page}}},!0).then(function(t){e.canLoadData=!0,0===t.code&&(console.log(t.data.list),0===t.data.list.length&&1===e.page?(e.msgList=[],e.$toast("暂无数据")):t.data.list.length>0?(e.msgList=e.msgList.concat(t.data.list),e.page=e.page+1):e.$toast("已加载全部数据"))}).catch(function(t){e.canLoadData=!0,console.log(t)}))},ReplaceBR:function(t){return t.replace(/<br\/>/g,"")}},Object(p["b"])(["updateMessageUnRead"]))},w=_,b=(s("c2bd"),Object(f["a"])(w,a,n,!1,null,"0db909f7",null));b.options.__file="MsgCenter.vue";e["default"]=b.exports},c2bd:function(t,e,s){"use strict";var a=s("3033"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-4068ad28.777ca3cd.js.map