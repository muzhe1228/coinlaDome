{"version":3,"sources":["webpack:///./src/assets/Images/ServerChat/icon_infor_gold_right@3x.png","webpack:///./src/views/User/ServerChat.vue?c922","webpack:///./src/assets/Images/ServerChat/icon_infor_gray_left@3x.png","webpack:///./src/views/User/ServerChat.vue?7805","webpack:///src/views/User/ServerChat.vue","webpack:///./src/views/User/ServerChat.vue?27a4","webpack:///./src/views/User/ServerChat.vue"],"names":["module","exports","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ServerChat_vue_vue_type_style_index_0_id_4924a981_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ServerChat_vue_vue_type_style_index_0_id_4924a981_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","BackHome","attrs","src","alt","_v","scrollToEndFlag","data","dataArray","_l","item","key","id","calltype","ENV","directives","name","rawName","value","expression","arg","_s","message","GetMessageTime","createtime","userInfo","head","placeholder","domProps","keydown","$event","_k","keyCode","SendMessage","input","target","composing","inputValue","changeText","focus","staticRenderFns","ServerChatvue_type_script_lang_js_","messageType","socket","appId","socketData","getENV","canReceiveMessage","mounted","GetHistory","GetSocketData","destroyed","onclose","computed","_objectSpread","Object","vuex_esm","components","ScrollH","methods","onSuccess","$clickAudio","$toast","onError","$changeInput","$router","push","_this","axios_default","a","get","serveChatHttp","params","then","response","CreateSocket","catch","error","socket_io_default","serveChatWS","userId","sessionid","nick","title","traceid","transports","ReceiveMessage","console","log","reverse","_SendMessage","_asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","$sendMessage","trim","length","abrupt","emit","appid","orgi","session","type","userid","stop","apply","arguments","msg","concat","date","reg","replace","time","Date","getTime","theHour","func","User_ServerChatvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-519d3ae4.736606a7.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAMAAAAB8C7XAAAAY1BMVEUAAADkyXjkyXjkynjs0YTlyXf/6IbkyXflynnrzH7lynvjyHfkyHfkyXfkyHfkynfly3nmzHnozXjmzID//4DkyHjjyXfkyXflyHjkyXjjynfjynnkyXjly3nny3vjzXrjyHe+nWEKAAAAIHRSTlMA4Z9cDZkFtUAZE/bw0b98OzEhCgLMr6mRjnhuaE42Lp+Cy3YAAACLSURBVCjPdc1HDgJBEENRV6eZnpzIqe5/SkBiAbTrb59kw+gK2hYdWE2lHqRaVBcUZaeqUq6Mnb76v5hjq+9+LkJ9Ev3UBiCFvEz+7Hr96gBAWTcDumRAhAEPA/YwYDagggF3AyI4SDCgBocjOFSJw7CCwi6AwtCAwriBgUwAAbmsIND7hCJxPoP0BAn2LLsF8RwyAAAAAElFTkSuQmCC\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServerChat.vue?vue&type=style&index=0&id=4924a981&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServerChat.vue?vue&type=style&index=0&id=4924a981&scoped=true&lang=stylus&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAMAAAAB8C7XAAAAY1BMVEUAAACqqqqrq6urq6uysrK2trasrKysrKyqqqqwsLCqqqqrq6urq6uqqqqqqqqrq6urq6urq6urq6utra2urq6zs7Oqqqqqqqqrq6uqqqqrq6uqqqqsrKysrKyqqqqsrKyqqqpOjlwpAAAAIHRSTlMA4J9cDQVAMxkT9vDBuLKamZB8OyEK5NLRzKl4bmhOLiRG+PwAAACISURBVCjPdc1HDsMwEATBYSaVo3PY/7/ShCHAgszpax0aT5D0QMBIm4qwiJx8UZSI6FiaSK6eUmHyrerDAWwlW2r0di832XXWdzMv0boMLymVwdUEMDB4M0DHIDBAxyAwQM/AKgLwDDAycC0BrA0B2CsBpIYAMDHArAhgfWyEv5y5/OBQNFp9AFGYLL+aGuVPAAAAAElFTkSuQmCC\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"leftBack\",on:{\"click\":_vm.BackHome}},[_c('img',{attrs:{\"src\":require(\"assets/Images/sub_icon_back.png\"),\"alt\":\"\"}}),_c('span',{staticClass:\"backTitle\"},[_vm._v(\"返回\")])]),_c('h1',[_vm._v(\"客服\")])]),_c('div',{staticClass:\"mainPage\"},[_c('ScrollH',{attrs:{\"scrollToEndFlag\":true,\"data\":_vm.dataArray}},_vm._l((_vm.dataArray),function(item){return _c('div',{key:item.id,staticClass:\"messageDiv\"},[(item.calltype === '呼出')?_c('div',{staticClass:\"leftMessage-div\"},[_c('p',{staticClass:\"l-headImg\"},[_c('img',{attrs:{\"src\":((_vm.ENV.ImageURL) + \"systemImg/kefu.png\"),\"alt\":\"\"}})]),_c('p',{staticClass:\"l-img\"},[_c('img',{attrs:{\"src\":require(\"assets/Images/ServerChat/icon_infor_gray_left@3x.png\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"l-message copy\"},[_c('p',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(item.message),expression:\"item.message\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.onSuccess),expression:\"onSuccess\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:(_vm.onError),expression:\"onError\",arg:\"error\"}]},[_vm._v(\"\\n              \"+_vm._s(item.message)+\"\\n              \"),_c('br'),_c('span',{staticClass:\"bottomTime\"},[_vm._v(_vm._s(_vm.GetMessageTime(item.createtime)))])])])]):_c('div',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(item.message),expression:\"item.message\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.onSuccess),expression:\"onSuccess\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:(_vm.onError),expression:\"onError\",arg:\"error\"}],staticClass:\"rightMessage-div\"},[_c('div',{staticClass:\"r-message copy\"},[_c('span',[_vm._v(\"\\n              \"+_vm._s(item.message)+\"\\n              \"),_c('br'),_c('span',{staticClass:\"bottomTime\"},[_vm._v(_vm._s(_vm.GetMessageTime(item.createtime)))])])]),_c('p',{staticClass:\"r-img\"},[_c('img',{attrs:{\"src\":require(\"assets/Images/ServerChat/icon_infor_gold_right@3x.png\"),\"alt\":\"\"}})]),_c('p',{staticClass:\"r-headImg\"},[_c('img',{attrs:{\"src\":_vm.userInfo.head,\"alt\":\"\"}})])])])}),0)],1),_c('div',{staticClass:\"InputDiv\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputValue),expression:\"inputValue\"}],attrs:{\"placeholder\":\"请输入您的问题\"},domProps:{\"value\":(_vm.inputValue)},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.SendMessage($event)},\"input\":[function($event){if($event.target.composing){ return; }_vm.inputValue=$event.target.value},function($event){_vm.changeText(_vm.inputValue)}],\"focus\":function($event){_vm.changeText(_vm.inputValue)}}}),_c('span',{on:{\"click\":_vm.SendMessage}},[_vm._v(\"发送\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrapper\">\n    <div class=\"header\">\n      <div class=\"leftBack\" @click=\"BackHome\">\n        <img src=\"~assets/Images/sub_icon_back.png\" alt>\n        <span class=\"backTitle\">返回</span>\n      </div>\n      <h1>客服</h1>\n    </div>\n    <div class=\"mainPage\">\n      <ScrollH :scrollToEndFlag=\"true\" :data=\"dataArray\">\n        <div class=\"messageDiv\" v-for=\"item in dataArray\" :key=\"item.id\">\n          <div v-if=\"item.calltype === '呼出'\" class=\"leftMessage-div\">\n            <p class=\"l-headImg\">\n              <img :src=\"`${ENV.ImageURL}systemImg/kefu.png`\" alt>\n            </p>\n            <p class=\"l-img\">\n              <img src=\"~assets/Images/ServerChat/icon_infor_gray_left@3x.png\" alt>\n            </p>\n            <div class=\"l-message copy\">\n              <p\n                v-clipboard:copy=\"item.message\"\n                v-clipboard:success=\"onSuccess\"\n                v-clipboard:error=\"onError\"\n              >\n                {{item.message}}\n                <br>\n                <span class=\"bottomTime\">{{GetMessageTime(item.createtime)}}</span>\n              </p>\n            </div>\n          </div>\n\n          <div\n            v-else\n            class=\"rightMessage-div\"\n            v-clipboard:copy=\"item.message\"\n            v-clipboard:success=\"onSuccess\"\n            v-clipboard:error=\"onError\"\n          >\n            <div class=\"r-message copy\">\n              <span>\n                {{item.message}}\n                <br>\n                <span class=\"bottomTime\">{{GetMessageTime(item.createtime)}}</span>\n              </span>\n            </div>\n            <p class=\"r-img\">\n              <img src=\"~assets/Images/ServerChat/icon_infor_gold_right@3x.png\" alt>\n            </p>\n            <p class=\"r-headImg\">\n              <img :src=\"userInfo.head\" alt>\n            </p>\n          </div>\n        </div>\n      </ScrollH>\n    </div>\n    <div class=\"InputDiv\">\n      <input\n        placeholder=\"请输入您的问题\"\n        v-model=\"inputValue\"\n        @keydown.enter=\"SendMessage\"\n        @input=\"changeText(inputValue)\"\n        @focus=\"changeText(inputValue)\"\n      >\n      <!-- <i class=\"iconfont\">&#xe681;</i> -->\n      <span @click=\"SendMessage\">发送</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SocketIo from \"common/socket.io\";\nimport ScrollH from \"components/ScrollH\";\nimport { mapState, mapActions } from \"vuex\";\nimport axios from \"axios\";\nimport ENV from \"common/Api/ENV\";\nimport { dateFormat } from \"common/func\";\nexport default {\n  data() {\n    return {\n      dataArray: [],\n      inputValue: \"\",\n      messageType: \"\",\n      socket: null, //1c1xez\n      appId: \"1eftbf\",\n      socketData: null,\n      ENV: ENV.getENV(),\n      canReceiveMessage: true\n    };\n  },\n  mounted() {\n    this.GetHistory();\n    this.GetSocketData();\n  },\n  destroyed() {\n    this.canReceiveMessage = false;\n    if (this.socket) {\n      this.socket.onclose();\n    }\n  },\n  computed: {\n    ...mapState([\"userInfo\"])\n  },\n  components: { ScrollH },\n  methods: {\n    onSuccess() {\n      this.$clickAudio();\n      this.$toast(\"复制成功\");\n    },\n    onError() {\n      this.$clickAudio();\n      this.$toast(\"复制失败，请点击重试\");\n    },\n    changeText(value) {\n      this.$changeInput(value);\n    },\n    BackHome() {\n      this.canReceiveMessage = false;\n      if (this.socket) {\n        this.socket.onclose();\n      }\n      this.$clickAudio();\n      this.$router.push(\"/index\");\n    },\n    GetSocketData() {\n      let _this = this;\n      axios\n        .get(this.ENV.serveChatHttp + \"/im/bbpk/\" + this.appId + \".html\", {\n          params: null\n        })\n        .then(function(response) {\n          _this.socketData = response.data;\n          _this.CreateSocket();\n        })\n        .catch(function(error) {});\n    },\n\n    CreateSocket() {\n      this.socket = SocketIo(\n        this.ENV.serveChatWS +\n          \"/im/user?userid=\" +\n          this.userInfo.userId +\n          \"&orgi=cskefu&session=\" +\n          this.socketData.sessionid +\n          \"&appid=\" +\n          this.appId +\n          \"&osname=&browser=&nickname=\" +\n          this.userInfo.nick +\n          \"&title=\" +\n          this.socketData.title +\n          \"&url=\" +\n          \"window.location.href\" +\n          \"&traceid=\" +\n          this.socketData.traceid,\n        { transports: [\"websocket\", \"polling\"] }\n      );\n\n      this.ReceiveMessage();\n    },\n    //获取历史消息\n    GetHistory() {\n      let _this = this;\n      axios\n        .get(\n          this.ENV.serveChatHttp +\n            \"/im/bbpk/history.html?appid=\" +\n            this.appId +\n            \"&orgi=\" +\n            \"cskefu\" +\n            \"&userid=\" +\n            this.userInfo.userId,\n          {\n            params: null\n          }\n        )\n        .then(function(response) {\n          console.log(\"历史消息\", response.data);\n\n          _this.dataArray = response.data.reverse();\n        })\n        .catch(function(error) {});\n    },\n    //发送消息\n    async SendMessage() {\n      this.$sendMessage();\n      if (this.inputValue.trim().length == 0) {\n        this.$toast(\"不能发送空白消息\");\n        return;\n      }\n      console.log(this.inputValue);\n      var object = {\n        message: this.inputValue,\n        calltype: \"呼入\"\n      };\n\n      await this.socket.emit(\"message\", {\n        appid: this.appId,\n        message: this.inputValue,\n        orgi: \"cskefu\",\n        session: this.socketData.sessionid,\n        type: \"message\",\n        userid: this.userInfo.userId\n      });\n\n      // this.dataArray = this.dataArray.concat(object);\n      this.inputValue = \"\";\n    },\n\n    //接收消息\n    ReceiveMessage(msg) {\n      let _this = this;\n      this.socket.on(\"message\", function(data) {\n        console.log(\"接收到socket消息\", data);\n        _this.dataArray = _this.dataArray.concat(data);\n      });\n\n      this.socket.on(\"disconnect\", function() {\n        console.log(\"连接客服失败，在线咨询服务不可用\");\n        // _this.$toast(\"连接客服失败，在线咨询服务不可用\", 3000);\n      });\n\n      this.socket.on(\"connect\", function() {\n        console.log(\"socket连接中\");\n      });\n\n      this.socket.on(\"agentstatus\", function(data) {\n        console.log(data.message);\n        if (_this.canReceiveMessage) {\n          _this.$toast(data.message, 3000);\n        }\n      });\n\n      this.socket.on(\"status\", function(data) {\n        console.log(data.message);\n        if (_this.canReceiveMessage) {\n          _this.$toast(data.message, 3000);\n        }\n      });\n    },\n    // 根据时间戳获取12小时进制的日期字符串\n    GetMessageTime(date) {\n      var reg = /\\-+/g;\n      date = date.replace(reg, \"/\");\n      let time = new Date(date).getTime(new Date(date));\n      var theHour = dateFormat(time, \"hh\");\n      if (theHour >= 0 && theHour < 13) {\n        //上午\n        return dateFormat(time, \"MM/dd hh:mm\") + \" AM\";\n      } else {\n        //下午\n        return (\n          dateFormat(time, \"MM/dd\") +\n          \" \" +\n          (theHour - 12) +\n          dateFormat(time, \":mm\") +\n          \" PM\"\n        );\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.wrapper {\n  width: 100%;\n  height: 100%;\n  .header {\n    height: 0.599251rem;\n    width: 100%;\n    background: url('../../assets/Images/sub_bg_top.png') 0 0 / 100% 100% no-repeat !important;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    h1 {\n      font-size: 0.2397rem;\n      color: #fefeff;\n      text-shadow: #0b1239 0 2.00003px;\n    }\n    p {\n      position: absolute;\n      color: white;\n      right: 0.2rem;\n      img {\n        width: 0.374532rem;\n        height: 0.299625rem;\n      }\n    }\n    .leftBack {\n      position: absolute;\n      left: 0;\n      top: 0;\n      display: flex;\n      align-items: center;\n      // justify-content :flex-start;\n      background: url('../../assets/Images/back_bg.png') 0 0 / 100% 100% no-repeat !important;\n      height: 105%;\n      width: 1.498127rem;\n      img {\n        margin-left: 0.179775rem;\n        width: 0.374532rem;\n      }\n      .backTitle {\n        margin-left: 0.059925rem;\n        font-size: 0.224719rem;\n        // font-weight: 400;\n        color: #95b1d7;\n      }\n    }\n  }\n  .mainPage {\n    height: calc(100% - 1.378277rem);\n    width: 100%;\n    .messageDiv {\n      margin-top: 0.299625rem;\n      min-height: 0.659176rem;\n      font-size: 0.209738rem;\n      .leftMessage-div {\n        display: flex;\n        position: relative;\n        padding-right: 0.749064rem;\n        .l-headImg {\n          width: 0.659176rem;\n          height: 0.659176rem;\n          border-radius: 0.329588rem;\n          margin-left: 0.224719rem;\n          img {\n            width: 0.659176rem;\n            height: 0.659176rem;\n            border-radius: 50%;\n          }\n        }\n        .l-img {\n          margin-left: 0.11985rem;\n          margin-top: 0.149813rem;\n          img {\n            width: 0.269663rem;\n            height: 0.269663rem;\n          }\n        }\n        .l-message {\n          margin-left: -0.074906rem;\n          // width: 48%;\n          border-radius: 0.224719rem;\n          background: #aaaaaa;\n          padding: 0.149813rem 0.299625rem;\n          display: flex;\n          align-items: center;\n          span {\n            word-break: break-all;\n            display: inline-block;\n            color: #2e2e33;\n            line-height: 0.269663rem;\n          }\n          .bottomTime {\n            color: #454545;\n            font-size: 0.179775rem;\n            margin-top: 0.11985rem;\n          }\n        }\n      }\n      .rightMessage-div {\n        display: flex;\n        position: relative;\n        justify-content: flex-end;\n        padding-right: 0.973783rem;\n        padding-left: 0.749064rem;\n        .r-headImg {\n          width: 0.659176rem;\n          height: 0.659176rem;\n          border-radius: 0.329588rem;\n          background: white;\n          position: absolute;\n          right: 0.224719rem;\n          img {\n            width: 0.659176rem;\n            height: 0.659176rem;\n            border-radius: 50%;\n          }\n        }\n        .r-img {\n          margin-left: -0.074906rem;\n          margin-top: 0.149813rem;\n          img {\n            width: 0.269663rem;\n            height: 0.269663rem;\n          }\n        }\n        .r-message {\n          // width: 48%;\n          border-radius: 0.224719rem;\n          background: #e3c877;\n          padding: 0.149813rem 0.299625rem;\n          display: flex;\n          align-items: center;\n          min-height: 0.569288rem;\n          min-width: 0.749064rem;\n          span {\n            display: inline-block;\n            color: #2e2e33;\n            line-height: 0.269663rem;\n            word-break: break-all;\n          }\n          .bottomTime {\n            color: #454545;\n            font-size: 0.179775rem;\n            margin-top: 0.11985rem;\n          }\n        }\n      }\n    }\n  }\n  .InputDiv {\n    height: 0.660075rem;\n    width: 100%;\n    background: #303769;\n    display: flex;\n    align-items: center;\n    /* justify-content:space-between; */\n    font-size: 0.209738rem;\n    input {\n      background: #363e76;\n      width: 85%;\n      height: 0.479401rem;\n      border-radius: 0.2397rem;\n      padding-left: 0.224719rem;\n      margin-left: 0.224719rem;\n      color: white;\n      ::placeholder {\n        color: #999999;\n      }\n    }\n    i {\n      margin-left: 0.11985rem;\n      font-size: 0.299625rem;\n      color: #e3c877;\n    }\n    span {\n      margin-left: 0.11985rem;\n      width: 0.958801rem;\n      height: 0.359551rem;\n      border-radius: 0.179775rem;\n      background: #e3c877;\n      color: #1d2533;\n      font-size: 0.194757rem;\n      line-height: 0.359551rem;\n      text-align: center;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServerChat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServerChat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ServerChat.vue?vue&type=template&id=4924a981&scoped=true&\"\nimport script from \"./ServerChat.vue?vue&type=script&lang=js&\"\nexport * from \"./ServerChat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ServerChat.vue?vue&type=style&index=0&id=4924a981&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4924a981\",\n  null\n  \n)\n\ncomponent.options.__file = \"ServerChat.vue\"\nexport default component.exports"],"sourceRoot":""}